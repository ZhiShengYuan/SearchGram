{
  "_comment": "SearchGram Configuration File - See CONFIG_REFERENCE.md for detailed documentation of all fields",
  "telegram": {
    "app_id": 123456,
    "app_hash": "your_app_hash_here",
    "bot_token": "123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",
    "owner_id": 260260121,
    "proxy": null,
    "ipv6": false
  },
  "search_engine": {
    "engine": "http",
    "batch": {
      "_comment": "Batch insert settings for improved performance",
      "enabled": true,
      "size": 100,
      "flush_interval": 1.0
    },
    "http": {
      "base_url": "http://searchgram-engine:8080",
      "api_key": null,
      "timeout": 30,
      "max_retries": 3
    },
    "meili": {
      "host": "http://meili:7700",
      "master_key": null
    },
    "mongo": {
      "host": "mongo",
      "port": 27017
    },
    "zinc": {
      "host": "http://zinc:4080",
      "user": "root",
      "password": "root"
    },
    "elastic": {
      "host": "http://elasticsearch:9200",
      "user": "elastic",
      "password": "changeme"
    }
  },
  "bot": {
    "_mode_comment": "Mode can be a single string ('private', 'group', 'public') or array (['private', 'group'])",
    "mode": "private",
    "_mode_examples": {
      "private_only": "private",
      "group_only": "group",
      "multi_mode": ["private", "group"],
      "public": "public"
    },
    "allowed_groups": [],
    "_allowed_groups_example": [-1001234567890, -1009876543210],
    "_allowed_groups_comment": "All groups that are indexed and searchable (defines the complete set of groups)",
    "allowed_users": [],
    "_allowed_users_example": [123456789, 987654321],
    "_allowed_users_comment": "Users who can use the bot (must also be configured in user_group_permissions for group access)",
    "admins": [],
    "_admins_example": [111111111, 222222222],
    "_admins_comment": "Admin users who can search ALL indexed groups (from allowed_groups). Admins are like owner but without admin command access.",
    "user_group_permissions": {},
    "_user_group_permissions_example": {
      "123456789": [-1001234567890],
      "987654321": [-1009876543210, -1001234567890]
    },
    "_user_group_permissions_comment": "Per-user group access control. Maps user_id (as string) to array of group_ids they can search. Users not listed or with empty array can't search any groups. Owner and admins bypass this."
  },
  "privacy": {
    "storage_file": "privacy_data.json"
  },
  "sync": {
    "enabled": true,
    "checkpoint_file": "sync_progress.json",
    "batch_size": 100,
    "retry_on_error": true,
    "max_retries": 3,
    "resume_on_restart": true,
    "delay_between_batches": 1.0,
    "_delay_comment": "Delay in seconds between processing batches to avoid Telegram FloodWait rate limits. Recommended: 0.5-2.0 seconds",
    "clear_completed": false,
    "_clear_completed_comment": "If false (recommended), keeps completed chats in checkpoint to prevent re-sync on restart. If true, removes them after sync completes.",
    "chats": []
  }
}
